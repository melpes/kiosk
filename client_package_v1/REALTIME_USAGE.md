# μ‹¤μ‹κ°„ VAD μμ„± ν΄λΌμ΄μ–ΈνΈ μ‚¬μ©λ²•

μ΄ λ¬Έμ„λ” **μ‹¤μ‹κ°„ VAD(Voice Activity Detection)λ¥Ό ν†µν• μμ„± μ£Όλ¬Έ μ‹μ¤ν…**μ μ™„μ „ν• μ‚¬μ©λ²•μ„ μ•λ‚΄ν•©λ‹λ‹¤.

## π― μ‹λ‚λ¦¬μ¤ κ°μ”

1. **μ„λ²„ μΈ΅**: λ©”μΈ ν”„λ΅μ νΈκ°€ μλ” μ»΄ν“¨ν„°μ—μ„ μμ„± μ²λ¦¬ μ„λ²„ μ‹¤ν–‰
2. **ν΄λΌμ΄μ–ΈνΈ μΈ΅**: `client_package` λ””λ ‰ν† λ¦¬λ§ μλ” λ΅μ»¬ μ»΄ν“¨ν„°μ—μ„ μ‹¤μ‹κ°„ μμ„± μ…λ ¥
3. **μλ™ μ²λ¦¬**: VADκ°€ μμ„±μ„ κ°μ§€ν•λ©΄ μλ™μΌλ΅ μ„λ²„μ— μ „μ†΅ν•μ—¬ μ£Όλ¬Έ μ²λ¦¬

## π“‹ μ‚¬μ „ μ¤€λΉ„

### μ„λ²„ μΈ΅ μ”κµ¬μ‚¬ν•­
- λ©”μΈ ν”„λ΅μ νΈ μ „μ²΄ μ†μ¤μ½”λ“
- Python 3.8 μ΄μƒ
- OpenAI API ν‚¤
- ν•„μ”ν• ν¨ν‚¤μ§€ μ„¤μΉ μ™„λ£

### ν΄λΌμ΄μ–ΈνΈ μΈ΅ μ”κµ¬μ‚¬ν•­
- `client_package` λ””λ ‰ν† λ¦¬λ§ λ³µμ‚¬
- Python 3.8 μ΄μƒ
- λ§μ΄ν¬ μ¥μΉ
- λ‹¤μ ν¨ν‚¤μ§€λ“¤:
  ```bash
  torch>=2.0.0
  sounddevice>=0.4.6
  scipy>=1.11.3
  numpy>=1.24.0
  requests>=2.31.0
  ```

## π€ 1λ‹¨κ³„: μ„λ²„ μ‹μ‘

λ©”μΈ ν”„λ΅μ νΈκ°€ μλ” μ»΄ν“¨ν„°μ—μ„:

```bash
# λ©”μΈ ν”„λ΅μ νΈ λ””λ ‰ν† λ¦¬λ΅ μ΄λ™
cd /path/to/main/project

# μ„λ²„ μ‹μ‘ (κ°„λ‹¨ν• λ°©λ²•)
python start_server.py

# λλ” νΉμ • μµμ…μΌλ΅ μ‹μ‘
python start_server.py --host 0.0.0.0 --port 8000 --debug
```

### μ„λ²„ μ„¤μ • ν™•μΈ

μ„λ²„κ°€ μ‹μ‘λλ©΄ λ‹¤μκ³Ό κ°™μ€ μ •λ³΄κ°€ ν‘μ‹λ©λ‹λ‹¤:

```
π¤ μμ„± ν‚¤μ¤μ¤ν¬ API μ„λ²„
======================================================================
β… OpenAI API ν‚¤: sk-proj12345...
π¤ TTS μ„¤μ •:
   - μ κ³µμ: openai
   - λ¨λΈ: tts-1
   - μμ„±: alloy

π€ μ„λ²„ μ„¤μ •:
   - νΈμ¤νΈ: 0.0.0.0
   - ν¬νΈ: 8000
   - λ””λ²„κ·Έ: False

π“΅ μ„λ²„ URL: http://0.0.0.0:8000
π“ ν—¬μ¤μ²΄ν¬: http://0.0.0.0:8000/health
π“ API λ¬Έμ„: http://0.0.0.0:8000/docs
```

## π¤ 2λ‹¨κ³„: ν΄λΌμ΄μ–ΈνΈ μ„¤μ •

### ν΄λΌμ΄μ–ΈνΈ ν¨ν‚¤μ§€ λ³µμ‚¬

μ„λ²„κ°€ μ‹¤ν–‰ μ¤‘μΈ μ»΄ν“¨ν„°μ—μ„ `client_package` λ””λ ‰ν† λ¦¬λ¥Ό ν΄λΌμ΄μ–ΈνΈ μ»΄ν“¨ν„°λ΅ λ³µμ‚¬ν•©λ‹λ‹¤.

```bash
# μ: scpλ¥Ό μ‚¬μ©ν• λ³µμ‚¬
scp -r /path/to/project/client_package user@client-computer:/home/user/
```

### μ„¤μ • νμΌ μμ •

ν΄λΌμ΄μ–ΈνΈ μ»΄ν“¨ν„°μ—μ„ `client_package/config.json` νμΌμ„ μμ •ν•©λ‹λ‹¤:

```json
{
  "server": {
    "url": "http://μ„λ²„IPμ£Όμ†:8000",
    "timeout": 30,
    "max_retries": 3,
    "retry_delay": 1
  },
  ...
}
```

μμ‹:
```json
{
  "server": {
    "url": "http://192.168.1.100:8000",
    "timeout": 30,
    "max_retries": 3,
    "retry_delay": 1
  }
}
```

### ν¨ν‚¤μ§€ μ„¤μΉ

ν΄λΌμ΄μ–ΈνΈ μ»΄ν“¨ν„°μ—μ„:

```bash
cd client_package
pip install -r requirements.txt
```

## π™οΈ 3λ‹¨κ³„: μ‹¤μ‹κ°„ ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰

### λ°©λ²• 1: κ°„νΈν• μ‹¤ν–‰ μ¤ν¬λ¦½νΈ μ‚¬μ©

```bash
cd client_package
python start_realtime_client.py
```

### λ°©λ²• 2: run_client.py μ‚¬μ©

```bash
cd client_package
python run_client.py --realtime-mic
```

### λ°©λ²• 3: μ™„μ „ν• μμ  μ¤ν¬λ¦½νΈ μ‚¬μ©

```bash
cd client_package
python examples/complete_realtime_client.py
```

## π“– μ‹¤μ  μ‚¬μ© κ³Όμ •

### 1. μ‹μ¤ν… μ΄κΈ°ν™”

ν΄λΌμ΄μ–ΈνΈλ¥Ό μ‹¤ν–‰ν•λ©΄ λ‹¤μκ³Ό κ°™μ€ κ³Όμ •μ„ κ±°μΉ©λ‹λ‹¤:

```
π¤ μ™„μ „ν• μ‹¤μ‹κ°„ λ§μ΄ν¬ μ…λ ¥ ν΄λΌμ΄μ–ΈνΈ
==================================================
π¥ μ„λ²„ μ—°κ²° ν™•μΈ μ¤‘...
β… μ„λ²„μ™€μ μ—°κ²°μ΄ μ •μƒμ…λ‹λ‹¤.

π§ λ§μ΄ν¬ μ‹μ¤ν… ν…μ¤νΈ μ¤‘...
β… λ§μ΄ν¬ ν…μ¤νΈ μ„±κ³µ!
   π“ ν‰κ·  λ³Όλ¥¨: 0.0234
   π“ μµλ€ λ³Όλ¥¨: 0.1567
   πµ μ¤λ””μ¤ κ°μ§€: β…
   π—£οΈ VAD μμ„± κ°μ§€: β…
   π― VAD λ¨λ“ μ‚¬μ© κ°€λ¥
```

### 2. μ„Έμ… μ •λ³΄ ν™•μΈ

```
π“ μ„Έμ… μ •λ³΄:
   π†” μ„Έμ… ID: 12345678-1234-5678-9abc-123456789abc
   π“΅ μ„λ²„ URL: http://192.168.1.100:8000
   β° μ„Έμ… μ‹μ‘: 2024-01-20 15:30:45

π¤ λ§μ΄ν¬ μƒνƒ:
   π”§ ν•λ“μ›¨μ–΄: β…
   π¤– VAD λ¨λΈ: β…
   π“ ν„μ¬ λ³Όλ¥¨: 0.0123
```

### 3. μ‹¤μ‹κ°„ μμ„± μ£Όλ¬Έ

```
======================================================================
π™οΈ μ‹¤μ‹κ°„ μμ„± μ£Όλ¬Έ μ‹μ¤ν…
======================================================================
π’¬ λ§μ΄ν¬μ— λ€κ³  μ£Όλ¬Έν•μ„Έμ” (μ: 'λΉ…λ§¥ μ„ΈνΈ ν•λ‚ μ£Όμ„Έμ”')
π”„ μμ„±μ΄ κ°μ§€λλ©΄ μλ™μΌλ΅ λ…Ήμν•μ—¬ μ„λ²„λ΅ μ „μ†΅ν•©λ‹λ‹¤
π μΆ…λ£ν•λ ¤λ©΄ Ctrl+Cλ¥Ό λ„λ¥΄μ„Έμ”
======================================================================

π¤ μ‹¤μ‹κ°„ μ£Όλ¬Έ λ€κΈ° μ¤‘... (VAD λ¨λ“)
β³ μƒνƒ: waiting | λ³Όλ¥¨:          | VAD λ¨λ“

π—£οΈ μμ„± κ°μ§€λ¨! λ…Ήμ μ‹μ‘...
π™οΈ μƒνƒ: recording | λ³Όλ¥¨: β–β–β–β–      | VAD λ¨λ“
π”‡ λ¬΄μμ΄ μ§€μ†λμ–΄ λ…Ήμμ„ μΆ…λ£ν•©λ‹λ‹¤.

π”„ μμ„±μ„ μ²λ¦¬ν•κ³  μ„λ²„λ΅ μ „μ†΅ μ¤‘...
πµ μμ„± νμΌ μƒμ„±: realtime_mic_20240120_153045.wav
π“΅ μ„λ²„λ΅ μμ„± μ „μ†΅ μ¤‘...

β… μ„λ²„ μ‘λ‹µ:
   π“ μ‘λ‹µ ν…μ¤νΈ: λΉ…λ§¥ μ„ΈνΈ 1κ°λ¥Ό μ£Όλ¬Έν•΄λ“λ¦΄κ²μ”. μλ£λ” μ½”μΉ΄μ½λΌλ΅ ν•μ‹κ² μ–΄μ”?
   π›’ μ£Όλ¬Έ μƒνƒ: μ£Όλ¬Έ_μ§„ν–‰μ¤‘
   π” TTS νμΌ: /api/voice/tts/abc123def456
   
π“ μ„Έμ… ν†µκ³„: 1/1 μ„±κ³µ (100.0%)
```

## π”§ κ³ κΈ‰ μ‚¬μ©λ²•

### μ„λ²„ URL λ™μ  λ³€κ²½

```bash
python start_realtime_client.py --server-url http://192.168.1.200:8000
```

### λ””λ²„κ·Έ λ¨λ“ μ‹¤ν–‰

```bash
python start_realtime_client.py --verbose
```

### μ‚¬μ©μ μ •μ μ„¤μ • νμΌ

```bash
python start_realtime_client.py --config my_config.json
```

## π› οΈ λ¬Έμ  ν•΄κ²°

### 1. μ„λ²„ μ—°κ²° μ‹¤ν¨

```
β μ„λ²„μ— μ—°κ²°ν•  μ μ—†μµλ‹λ‹¤: http://192.168.1.100:8000

π’΅ ν•΄κ²° λ°©λ²•:
   1. μ„λ²„κ°€ μ‹¤ν–‰ μ¤‘μΈμ§€ ν™•μΈν•μ„Έμ”
   2. config.jsonμ—μ„ μ„λ²„ URLμ΄ μ¬λ°”λ¥Έμ§€ ν™•μΈν•μ„Έμ”
   3. λ„¤νΈμ›ν¬ μ—°κ²°μ„ ν™•μΈν•μ„Έμ”
```

**ν•΄κ²°μ±…:**
- μ„λ²„ μ»΄ν“¨ν„°μ—μ„ `http://localhost:8000/health` μ ‘μ† ν™•μΈ
- λ°©ν™”λ²½ μ„¤μ • ν™•μΈ
- IP μ£Όμ†μ™€ ν¬νΈ λ²νΈ μ¬ν™•μΈ

### 2. λ§μ΄ν¬ ν…μ¤νΈ μ‹¤ν¨

```
β λ§μ΄ν¬ ν…μ¤νΈ μ‹¤ν¨:
   π”§ ν•λ“μ›¨μ–΄ μ¤λ¥: μ‚¬μ© κ°€λ¥ν• λ§μ΄ν¬ μ¥μΉκ°€ μ—†μµλ‹λ‹¤

π’΅ ν•΄κ²° λ°©λ²•:
   1. λ§μ΄ν¬κ°€ μ—°κ²°λμ–΄ μλ”μ§€ ν™•μΈν•μ„Έμ”
   2. λ§μ΄ν¬ κ¶ν•μ΄ ν—μ©λμ–΄ μλ”μ§€ ν™•μΈν•μ„Έμ”
   3. λ‹¤λ¥Έ ν”„λ΅κ·Έλ¨μ—μ„ λ§μ΄ν¬λ¥Ό μ‚¬μ©ν•κ³  μμ§€ μ•μ€μ§€ ν™•μΈν•μ„Έμ”
   4. λ§μ΄ν¬ λ³Όλ¥¨μ„ ν™•μΈν•μ„Έμ”
```

**ν•΄κ²°μ±…:**
- μ‹μ¤ν… μ„¤μ •μ—μ„ λ§μ΄ν¬ κ¶ν• ν™•μΈ
- λ§μ΄ν¬ μ¥μΉ λ“λΌμ΄λ²„ μ—…λ°μ΄νΈ
- λ‹¤λ¥Έ λ§μ΄ν¬ ν…μ¤νΈ μ•±μΌλ΅ λ™μ‘ ν™•μΈ

### 3. VAD λ¨λΈ λ΅λ“ μ‹¤ν¨

```
β οΈ VAD ν΄λ°± λ¨λ“ (λ³Όλ¥¨ κΈ°λ° κ°μ§€)
```

**μ„¤λ…:**
- VAD λ¨λΈ λ΅λ“μ— μ‹¤ν¨ν–μ§€λ§ μ‹μ¤ν…μ€ λ³Όλ¥¨ κΈ°λ° κ°μ§€λ΅ λ™μ‘
- μΈν„°λ„· μ—°κ²° λ¬Έμ λ‚ torch μ„¤μΉ λ¬Έμ μΌ κ°€λ¥μ„±
- κΈ°λ¥μƒ λ¬Έμ μ—†μ΄ μ‚¬μ© κ°€λ¥

## π“ μ„±λ¥ μµμ ν™”

### 1. VAD μ„κ³„κ°’ μ΅°μ •

ν™κ²½μ΄ μ‹λ„λ¬μ΄ κ²½μ° VAD μ„κ³„κ°’μ„ λ†’μ—¬μ„ μ¤μΈμ‹μ„ μ¤„μΌ μ μμµλ‹λ‹¤.

### 2. λ„¤νΈμ›ν¬ μµμ ν™”

- μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈλ¥Ό κ°™μ€ λ„¤νΈμ›ν¬μ— μ—°κ²°
- μ μ„  μ—°κ²° μ‚¬μ© κ¶μ¥
- QoS μ„¤μ •μΌλ΅ μ¤λ””μ¤ νΈλν”½ μ°μ„ μμ„ λ¶€μ—¬

### 3. μ¤λ””μ¤ ν’μ§ μ„¤μ •

λ” λ†’μ€ μμ§μ΄ ν•„μ”ν• κ²½μ° μƒν”λ μ΄νΈλ¥Ό μ΅°μ •ν•  μ μμµλ‹λ‹¤.

## π” μ„Έμ… ν†µκ³„

μ‹μ¤ν…μ€ μ‹¤μ‹κ°„μΌλ΅ λ‹¤μ ν†µκ³„λ¥Ό μ κ³µν•©λ‹λ‹¤:

- **μ΄ μ”μ²­ μ**: μ„λ²„λ΅ μ „μ†΅ν• μμ„± νμΌ κ°μ
- **μ„±κ³µ μ”μ²­**: μ •μƒμ μΌλ΅ μ²λ¦¬λ μ”μ²­ μ
- **μ‹¤ν¨ μ”μ²­**: μ¤λ¥κ°€ λ°μƒν• μ”μ²­ μ
- **μ„±κ³µλ¥ **: μ „μ²΄ μ„±κ³µλ¥  νΌμ„Όν‹°μ§€
- **μ„Έμ… μ‹κ°„**: μ΄ μ‚¬μ© μ‹κ°„

## π“ μ£Όμ” νΉμ§• μ”μ•½

β… **μλ™ μμ„± κ°μ§€**: VADλ¥Ό ν†µν• μ •ν™•ν• μμ„±/λ¬΄μ κµ¬λ¶„  
β… **μ¦‰μ‹ μ „μ†΅**: μμ„± κ°μ§€ μ™„λ£ μ¦‰μ‹ μ„λ²„λ΅ μλ™ μ „μ†΅  
β… **μ—°μ† μ²λ¦¬**: ν• λ² μ‹¤ν–‰μΌλ΅ μ—¬λ¬ λ²μ μ£Όλ¬Έ μ²λ¦¬  
β… **ν΄λ°± λ¨λ“**: VAD μ‹¤ν¨ μ‹ λ³Όλ¥¨ κΈ°λ° κ°μ§€λ΅ μλ™ μ „ν™  
β… **μ‹¤μ‹κ°„ ν”Όλ“λ°±**: μμ„± κ°μ§€, μ „μ†΅, μ‘λ‹µ μƒνƒλ¥Ό μ‹¤μ‹κ°„ ν‘μ‹  
β… **μ¤λ¥ λ³µκµ¬**: λ„¤νΈμ›ν¬ μ¤λ¥, μ„λ²„ μ¤λ¥ μ‹ μλ™ μ¬μ‹λ„  
β… **μ„Έμ… κ΄€λ¦¬**: μ„Έμ…λ³„ ν†µκ³„ λ° μƒνƒ μ¶”μ   

μ΄μ  μ™„μ „ν• μ‹¤μ‹κ°„ VAD μμ„± μ£Όλ¬Έ μ‹μ¤ν…μ„ μ‚¬μ©ν•  μ μμµλ‹λ‹¤! π‰