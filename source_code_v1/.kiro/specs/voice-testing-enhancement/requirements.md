# Requirements Document

## Introduction

이 기능은 현재 음성 기반 키오스크 AI 주문 시스템에 두 가지 핵심 기능을 추가합니다. 첫째, 다양한 텍스트 입력에 대한 자동화된 테스트케이스 생성 및 결과 분석 시스템을 구축하여 시스템의 응답 품질을 체계적으로 평가할 수 있게 합니다. 둘째, reference/input_as_mic.py의 실시간 마이크 입력 기능을 메인 시스템에 통합하여 사용자가 실제 마이크를 통해 음성을 입력할 수 있는 기능을 제공합니다.

## Requirements

### Requirement 1

**User Story:** 개발자로서, 다양한 텍스트 입력에 대한 시스템 응답을 자동으로 테스트하고 결과를 분석할 수 있는 기능이 필요합니다. 이를 통해 시스템의 성능을 체계적으로 평가하고 개선점을 파악할 수 있습니다.

#### Acceptance Criteria

1. WHEN 개발자가 테스트케이스 파일을 생성하면 THEN 시스템은 맥도날드 키오스크 환경에서 발생할 수 있는 다양한 입력 시나리오를 포함한 테스트케이스를 자동 생성해야 합니다
2. WHEN 테스트케이스에 은어나 줄임말이 포함되면 THEN 시스템은 "상스치콤", "베토디" 같은 맥도날드 은어를 정확히 처리해야 합니다
3. WHEN 테스트케이스에 반말 입력이 포함되면 THEN 시스템은 반말로 된 주문을 정상적으로 처리해야 합니다
4. WHEN 테스트케이스에 복합 의도가 포함되면 THEN 시스템은 한 문장에서 주문과 취소가 동시에 나타나는 경우를 적절히 처리해야 합니다
5. WHEN 모든 테스트케이스가 실행되면 THEN 시스템은 각 입력에 대한 응답, 처리 시간, 의도 파악 결과를 포함한 상세한 결과 보고서를 생성해야 합니다

### Requirement 2

**User Story:** 사용자로서, 실제 마이크를 통해 음성을 입력하여 키오스크와 상호작용할 수 있는 기능이 필요합니다. 이를 통해 실제 키오스크 환경과 유사한 경험을 제공받을 수 있습니다.

#### Acceptance Criteria

1. WHEN 사용자가 마이크 입력 모드를 선택하면 THEN 시스템은 실시간으로 마이크에서 음성을 감지하고 녹음을 시작해야 합니다
2. WHEN 사용자가 말을 시작하면 THEN 시스템은 VAD(Voice Activity Detection)를 사용하여 자동으로 녹음을 시작해야 합니다
3. WHEN 사용자가 말을 멈추고 일정 시간이 지나면 THEN 시스템은 자동으로 녹음을 종료하고 음성 파일을 생성해야 합니다
4. WHEN 음성 파일이 생성되면 THEN 시스템은 해당 파일을 기존 main.py의 process_audio_input 메서드로 전달하여 처리해야 합니다
5. WHEN 마이크 입력 처리가 완료되면 THEN 시스템은 음성인식 결과와 대화 응답을 사용자에게 제공해야 합니다

### Requirement 3

**User Story:** 개발자로서, 테스트 결과를 다양한 형태로 저장하고 분석할 수 있는 기능이 필요합니다. 이를 통해 시스템 성능을 지속적으로 모니터링하고 개선할 수 있습니다.

#### Acceptance Criteria

1. WHEN 테스트가 완료되면 THEN 시스템은 결과를 텍스트 파일과 마크다운 파일 형태로 저장해야 합니다
2. WHEN 테스트 결과가 저장되면 THEN 파일에는 입력 텍스트, 파악된 의도, 시스템 응답, 처리 시간, 성공/실패 여부가 포함되어야 합니다
3. WHEN 여러 테스트가 실행되면 THEN 시스템은 전체 성공률, 평균 처리 시간, 의도별 정확도 통계를 제공해야 합니다
4. WHEN 테스트 결과에 오류가 발생하면 THEN 시스템은 오류 유형과 상세 정보를 별도로 기록해야 합니다
5. WHEN 테스트 보고서가 생성되면 THEN 개발자가 쉽게 읽을 수 있는 형태로 포맷팅되어야 합니다

### Requirement 4

**User Story:** 사용자로서, 마이크 입력 시 음성 품질과 환경 설정을 조정할 수 있는 기능이 필요합니다. 이를 통해 다양한 환경에서 최적의 음성 인식 성능을 얻을 수 있습니다.

#### Acceptance Criteria

1. WHEN 사용자가 마이크 설정을 조정하면 THEN 시스템은 VAD 임계값, 최대 무음 시간, 최소 녹음 시간을 설정할 수 있어야 합니다
2. WHEN 마이크 입력이 시작되면 THEN 시스템은 현재 설정값과 마이크 상태를 사용자에게 표시해야 합니다
3. WHEN 음성 감지 중이면 THEN 시스템은 실시간으로 음성 감지 상태를 시각적으로 표시해야 합니다
4. WHEN 녹음이 완료되면 THEN 시스템은 녹음된 파일의 길이와 품질 정보를 제공해야 합니다
5. WHEN 마이크 입력에 문제가 발생하면 THEN 시스템은 적절한 오류 메시지와 해결 방법을 제공해야 합니다