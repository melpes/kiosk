# ìŒì„± ê¸°ë°˜ í‚¤ì˜¤ìŠ¤í¬ AI ì£¼ë¬¸ ì‹œìŠ¤í…œ - ì•„í‚¤í…ì²˜ ì‹œê°í™”

## 1. ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```mermaid
graph TB
    subgraph "ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤"
        A[ğŸ‘¤ ì‚¬ìš©ì ìŒì„± ì…ë ¥]
        B[ğŸ“ í…ìŠ¤íŠ¸ ì…ë ¥]
        C[ğŸ“ ìŒì„± íŒŒì¼ ì…ë ¥]
        D[ğŸŒ API í´ë¼ì´ì–¸íŠ¸]
    end
    
    subgraph "API ì„œë²„ ê³„ì¸µ"
        E[ğŸš€ FastAPI ì„œë²„<br/>HTTP/WebSocket]
        F[ğŸ”’ ë³´ì•ˆ ë¯¸ë“¤ì›¨ì–´<br/>ì¸ì¦/ì†ë„ì œí•œ]
        G[ğŸ“Š ëª¨ë‹ˆí„°ë§<br/>ì„±ëŠ¥/ì˜¤ë¥˜ ì¶”ì ]
    end
    
    subgraph "ìŒì„± ì „ì²˜ë¦¬ ê³„ì¸µ"
        H[ğŸ”Š AudioProcessor<br/>ë‹¤ì¤‘í™”ìì¸ì‹/êµ¬ë¶„]
    end
    
    subgraph "ìŒì„±ì¸ì‹ ê³„ì¸µ"
        I[ğŸ—£ï¸ SpeechRecognizer<br/>Whisper ê¸°ë°˜ STT]
    end
    
    subgraph "ìì—°ì–´ ì²˜ë¦¬ ê³„ì¸µ"
        J[ğŸ§  IntentRecognizer<br/>GPT-4o ê¸°ë°˜ ì˜ë„ íŒŒì•…]
        K[ğŸ’¬ DialogueManager<br/>ë©€í‹°í„´ ëŒ€í™” ê´€ë¦¬]
    end
    
    subgraph "ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì¸µ"
        L[ğŸ” Menu<br/>ë©”ë‰´ ê´€ë¦¬]
        M[ğŸ“‹ OrderManager<br/>ì£¼ë¬¸ ì²˜ë¦¬]
    end
    
    subgraph "ì‘ë‹µ ìƒì„± ê³„ì¸µ"
        N[ğŸ“ TextResponseSystem<br/>ì‘ë‹µ ìƒì„±]
        O[ğŸ”Š TTSManager<br/>ìŒì„± í•©ì„±]
    end
    
    subgraph "í…ŒìŠ¤íŠ¸ ì‹œìŠ¤í…œ"
        P[ğŸ§ª TestCaseGenerator<br/>ìë™ í…ŒìŠ¤íŠ¸ ìƒì„±]
        Q[ğŸ“Š TestRunner<br/>í…ŒìŠ¤íŠ¸ ì‹¤í–‰]
        R[ğŸ“ˆ ReportGenerator<br/>ê²°ê³¼ ë¶„ì„]
    end
    
    subgraph "ë°ì´í„° ì €ì¥ì†Œ"
        S[(ğŸ—„ï¸ ë©”ë‰´ ì„¤ì •<br/>menu_config.json)]
        T[(ğŸ“Š ì£¼ë¬¸ ë°ì´í„°)]
        U[(ğŸ“ ë¡œê·¸ ë°ì´í„°)]
        V[(ğŸ§ª í…ŒìŠ¤íŠ¸ ê²°ê³¼)]
    end
    
    A --> E
    B --> E
    C --> E
    D --> E
    
    E --> F
    E --> G
    E --> H
    
    H --> I
    I --> J
    J --> K
    K --> L
    K --> M
    
    L --> N
    M --> N
    N --> O
    
    P --> Q
    Q --> R
    
    L <--> S
    M <--> T
    N --> U
    R --> V
    
    O --> W[ğŸ”Š ìŒì„± ì¶œë ¥]
    N --> X[ğŸ“± í…ìŠ¤íŠ¸ ì¶œë ¥]
```

## 2. ë°ì´í„° íë¦„ ë‹¤ì´ì–´ê·¸ë¨

```mermaid
sequenceDiagram
    participant U as ğŸ‘¤ ì‚¬ìš©ì
    participant C as ğŸ“± í´ë¼ì´ì–¸íŠ¸
    participant API as ğŸš€ APIì„œë²„
    participant P as ğŸ¯ íŒŒì´í”„ë¼ì¸
    participant A as ğŸ”Š ìŒì„±ì „ì²˜ë¦¬
    participant S as ğŸ—£ï¸ìŒì„±ì¸ì‹
    participant I as ğŸ§  ì˜ë„íŒŒì•…
    participant D as ğŸ’¬ ëŒ€í™”ê´€ë¦¬
    participant O as ğŸ“‹ ì£¼ë¬¸ê´€ë¦¬
    participant R as ğŸ“ ì‘ë‹µìƒì„±
    
    U->>C: ìŒì„± íŒŒì¼ ì—…ë¡œë“œ
    C->>API: HTTP POST /process-voice
    API->>P: VoiceKioskPipeline í˜¸ì¶œ
    P->>A: ìŒì„± ì „ì²˜ë¦¬
    A->>S: Whisper ìŒì„±ì¸ì‹
    S->>I: GPT-4 ì˜ë„íŒŒì•…
    I->>D: ëŒ€í™” ì²˜ë¦¬
    D->>O: ì£¼ë¬¸ ê´€ë¦¬
    O->>R: ì‘ë‹µ ìƒì„±
    R->>P: ì²˜ë¦¬ ê²°ê³¼
    P->>API: JSON ì‘ë‹µ
    API->>C: HTTP Response
    C->>U: í…ìŠ¤íŠ¸/ìŒì„± ì¶œë ¥
    
    Note over U,C: ì „ì²´ ì²˜ë¦¬ ì‹œê°„: ëŒ€ëµ 20ì´ˆ (ì‹¤ì¸¡, API ê¸°ë°˜)
```

## 3. ëª¨ë“ˆë³„ ìƒì„¸ êµ¬ì¡°

```mermaid
graph LR
    subgraph "src/"
        subgraph "api/"
            API1[server.py<br/>FastAPI ì„œë²„]
            API2[security.py<br/>ë³´ì•ˆ ë¯¸ë“¤ì›¨ì–´]
            API3[monitoring.py<br/>ëª¨ë‹ˆí„°ë§]
        end
        
        subgraph "audio/"
            A1[preprocessing.py<br/>ë‹¤ì¤‘í™”ìì¸ì‹]
            A2[tts_manager.py<br/>ìŒì„±í•©ì„±]
        end
        
        subgraph "speech/"
            S1[recognition.py<br/>Whisper STT]
        end
        
        subgraph "conversation/"
            C1[intent.py<br/>ì˜ë„íŒŒì•…]
            C2[dialogue.py<br/>ëŒ€í™”ê´€ë¦¬]
        end
        
        subgraph "order/"
            O1[menu.py<br/>ë©”ë‰´ê´€ë¦¬]
            O2[order.py<br/>ì£¼ë¬¸ì²˜ë¦¬]
        end
        
        subgraph "response/"
            R1[text_response.py<br/>ì‘ë‹µìƒì„±]
            R2[formatter.py<br/>ì‘ë‹µí¬ë§·íŒ…]
        end
        
        subgraph "testing/"
            T1[test_case_generator.py<br/>í…ŒìŠ¤íŠ¸ìƒì„±]
            T2[test_runner.py<br/>í…ŒìŠ¤íŠ¸ì‹¤í–‰]
            T3[report_generator.py<br/>ë³´ê³ ì„œìƒì„±]
        end
        
        subgraph "models/"
            M1[*.py<br/>ë°ì´í„°ëª¨ë¸]
        end
        
        subgraph "utils/"
            U1[*.py<br/>ìœ í‹¸ë¦¬í‹°]
        end
    end
```

## 4. í‚¤ì˜¤ìŠ¤í¬ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

```mermaid
stateDiagram-v2
    [*] --> ì„œë²„ëŒ€ê¸°
    ì„œë²„ëŒ€ê¸° --> ìš”ì²­ìˆ˜ì‹  : API ìš”ì²­
    ìš”ì²­ìˆ˜ì‹  --> íŒŒì¼ê²€ì¦ : ìŒì„± íŒŒì¼ ì—…ë¡œë“œ
    íŒŒì¼ê²€ì¦ --> ìŒì„±ì¸ì‹ : ê²€ì¦ í†µê³¼
    íŒŒì¼ê²€ì¦ --> ì˜¤ë¥˜ì‘ë‹µ : ê²€ì¦ ì‹¤íŒ¨
    
    ìŒì„±ì¸ì‹ --> ì˜ë„íŒŒì•… : STT ì™„ë£Œ
    ì˜ë„íŒŒì•… --> ì£¼ë¬¸ì²˜ë¦¬ : ì£¼ë¬¸ ì˜ë„
    ì˜ë„íŒŒì•… --> ë¬¸ì˜ì‘ë‹µ : ë¬¸ì˜ ì˜ë„
    ì˜ë„íŒŒì•… --> ë„ì›€ë§ : ë„ì›€ ìš”ì²­
    ì˜ë„íŒŒì•… --> í…ŒìŠ¤íŠ¸ëª¨ë“œ : í…ŒìŠ¤íŠ¸ ì‹¤í–‰
    
    ì£¼ë¬¸ì²˜ë¦¬ --> ë©”ë‰´í™•ì¸ : ë©”ë‰´ ê²€ìƒ‰
    ë©”ë‰´í™•ì¸ --> ì˜µì…˜ì„ íƒ : ë©”ë‰´ ë°œê²¬
    ì˜µì…˜ì„ íƒ --> ì£¼ë¬¸í™•ì • : ì˜µì…˜ ì™„ë£Œ
    ì£¼ë¬¸í™•ì • --> ê²°ì œì²˜ë¦¬ : ê²°ì œ ìš”ì²­
    ê²°ì œì²˜ë¦¬ --> ì™„ë£Œì‘ë‹µ : ê²°ì œ ì„±ê³µ
    
    ë¬¸ì˜ì‘ë‹µ --> ì™„ë£Œì‘ë‹µ : ì‘ë‹µ ì™„ë£Œ
    ë„ì›€ë§ --> ì™„ë£Œì‘ë‹µ : ë„ì›€ë§ ì œê³µ
    í…ŒìŠ¤íŠ¸ëª¨ë“œ --> ì™„ë£Œì‘ë‹µ : í…ŒìŠ¤íŠ¸ ì™„ë£Œ
    ì™„ë£Œì‘ë‹µ --> ì„œë²„ëŒ€ê¸° : JSON ì‘ë‹µ
    ì˜¤ë¥˜ì‘ë‹µ --> ì„œë²„ëŒ€ê¸° : ì˜¤ë¥˜ JSON
    
    ë©”ë‰´í™•ì¸ --> ì™„ë£Œì‘ë‹µ : ë©”ë‰´ ì—†ìŒ
    ì˜µì…˜ì„ íƒ --> ì£¼ë¬¸ì²˜ë¦¬ : ì˜µì…˜ ë³€ê²½
```

## 5. ê¸°ìˆ  ìŠ¤íƒ êµ¬ì„±ë„

```mermaid
graph TB
    subgraph "í´ë¼ì´ì–¸íŠ¸ ê³„ì¸µ"
        F1[ğŸ“± ì›¹ í´ë¼ì´ì–¸íŠ¸]
        F2[ğŸ“ CLI ì¸í„°í˜ì´ìŠ¤]
        F3[ğŸ“ íŒŒì¼ ì—…ë¡œë“œ]
        F4[ğŸ”§ ë””ë²„ê·¸ ë„êµ¬]
    end
    
    subgraph "API ì„œë²„ ê³„ì¸µ"
        API1[ğŸš€ FastAPI<br/>ì›¹ ì„œë²„]
        API2[ğŸ”’ ë³´ì•ˆ ë¯¸ë“¤ì›¨ì–´<br/>ì¸ì¦/ì†ë„ì œí•œ]
        API3[ğŸ“Š ëª¨ë‹ˆí„°ë§<br/>ì„±ëŠ¥/ì˜¤ë¥˜ ì¶”ì ]
    end
    
    subgraph "AI/ML ê³„ì¸µ"
        AI1[ğŸ¤– OpenAI Whisper<br/>ìŒì„±ì¸ì‹]
        AI2[ğŸ§  GPT-4o<br/>ìì—°ì–´ì²˜ë¦¬]
        AI3[ğŸ”Š OpenAI TTS<br/>ìŒì„±í•©ì„±]
    end
    
    subgraph "ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì¸µ"
        BL1[ğŸ” ë©”ë‰´ ê´€ë¦¬]
        BL2[ğŸ“‹ ì£¼ë¬¸ ì²˜ë¦¬]
        BL3[ğŸ’¬ ëŒ€í™” ê´€ë¦¬]
        BL4[ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œìŠ¤í…œ]
    end
    
    subgraph "ë°ì´í„° ê³„ì¸µ"
        D1[ğŸ“„ JSON ì„¤ì •íŒŒì¼]
        D2[ğŸ“Š ë¡œê·¸ ë°ì´í„°]
        D3[ğŸµ ì„ì‹œ ì˜¤ë””ì˜¤ íŒŒì¼]
        D4[ğŸ“ˆ í…ŒìŠ¤íŠ¸ ê²°ê³¼]
    end
    
    subgraph "ì¸í”„ë¼ ê³„ì¸µ"
        I1[ğŸ Python 3.8+]
        I2[ğŸ“¦ FastAPI/Uvicorn]
        I3[ğŸ”§ í™˜ê²½ë³€ìˆ˜ ì„¤ì •]
    end
    
    F1 --> API1
    F2 --> API1
    F3 --> API1
    F4 --> BL4
    
    API1 --> API2
    API2 --> API3
    API3 --> AI1
    AI1 --> AI2
    AI2 --> BL3
    BL3 --> BL1
    BL3 --> BL2
    AI2 --> AI3
    
    BL1 --> D1
    BL2 --> D2
    AI1 --> D3
    BL4 --> D4
    
    API1 --> I2
    AI1 --> I1
    AI2 --> I1
    BL1 --> I3
```

## 6. ì„±ëŠ¥ ë° í’ˆì§ˆ ì§€í‘œ

```mermaid
pie title ì²˜ë¦¬ ì‹œê°„ ë¶„í¬ (ì‹¤ì¸¡ ê¸°ë°˜)
    "ì„œë²„ ì²˜ë¦¬" : 35
    "ë„¤íŠ¸ì›Œí¬ ì „ì†¡" : 25
    "í…ìŠ¤íŠ¸ ì²˜ë¦¬" : 15
    "ìŒì„± ì…ë ¥" : 10
    "ë©”ë‰´ ë¡œë”©" : 10
    "TTS ìƒì„±" : 5
```

```mermaid
xychart-beta
    title "ì²˜ë¦¬ ì‹œê°„ ë¶„ì„ (ì´ˆ)"
    x-axis ["ìŒì„±ì…ë ¥", "ë„¤íŠ¸ì›Œí¬ì „ì†¡", "ì„œë²„ì²˜ë¦¬", "TTSìƒì„±", "í…ìŠ¤íŠ¸ì²˜ë¦¬", "ë©”ë‰´ë¡œë”©"]
    y-axis "ì²˜ë¦¬ì‹œê°„" 0 --> 10
    bar [2.0, 5.0, 7.0, 1.0, 3.0, 2.0]
```
